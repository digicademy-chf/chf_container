## INDEXER SETTINGS ###################################################################################

indexer
{
    # memory limit, in bytes, kiloytes (16384K) or megabytes (256M)
    # optional, default is 32M, max is 2047M, recommended is 256M to 1024M
    mem_limit        = 512M
}

## SEARCHD SETTINGS ###################################################################################

searchd
{
    # [hostname:]port[:protocol], or /unix/socket/path to listen on
    # known protocols are 'sphinx' (SphinxAPI) and 'mysql41' (SphinxQL)
    #
    # multi-value, multiple listen points are allowed
    # optional, defaults are 9312:sphinx and 9306:mysql41, as below
    #
    # listen            = 127.0.0.1
    # listen            = 192.168.0.1:9312
    # listen            = 9312
    # listen            = /var/run/searchd.sock
    listen            = 9312
    listen            = 9306:mysql41

    # log file, searchd run info is logged here
    # optional, default is 'searchd.log'
    log            = /opt/sphinx/index/searchd.log
    binlog_path    = /opt/sphinx/index/

    # query log file, all search queries are logged here
    # optional, default is empty (do not log queries)
    query_log        = /opt/sphinx/index/query.log

    # client read timeout, seconds
    # optional, default is 5
    read_timeout        = 5

    # request timeout, seconds
    # optional, default is 5 minutes
    client_timeout        = 300

    # maximum amount of children to fork (concurrent searches to run)
    # optional, default is 0 (unlimited)
    max_children        = 30

    # PID file, searchd process ID file name
    # mandatory
    pid_file        = /opt/sphinx/index/searchd.pid

    # seamless rotate, prevents rotate stalls if precaching huge datasets
    # optional, default is 1
    seamless_rotate        = 1

    # whether to forcibly preopen all indexes on startup
    # optional, default is 1 (preopen everything)
    preopen_indexes        = 1

    # whether to unlink .old index copies on succesful rotation.
    # optional, default is 1 (do unlink)
    unlink_old        = 1

    # MVA updates pool size
    # shared between all instances of searchd, disables attr flushes!
    # optional, default size is 1M
#    mva_updates_pool    = 1M

    # max allowed network packet size
    # limits both query packets from clients, and responses from agents
    # optional, default size is 8M
    max_packet_size        = 8M

    # max allowed per-query filter count
    # optional, default is 256
    max_filters        = 256

    # max allowed per-filter values count
    # optional, default is 4096
    max_filter_values    = 4096

    # unhinted read size (currently used when reading hits)
    # optional, default is 32K
    #
    read_unhinted        = 32K

    # max allowed per-batch query count (aka multi-query count)
    # optional, default is 32
    max_batch_queries    = 32

    # multi-processing mode (MPM)
    # known values are none, fork, prefork, and threads
    # optional, default is fork
    #
    workers            = threads # for RT to work
}

## COMMON SETTINGS #################################################################################

common
{
}
